
{
  "entities": {
    "UserProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserProfile",
      "type": "object",
      "description": "Represents a user's profile with personal and financial information.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user profile, matches Firebase Auth UID."
        },
        "email": {
          "type": "string",
          "description": "The user's email address.",
          "format": "email"
        },
        "name": {
          "type": "string",
          "description": "The user's full name."
        },
        "role": {
          "type": "string",
          "description": "The user's role in the application.",
          "enum": [
            "user",
            "admin"
          ]
        },
        "profession": {
          "type": "string",
          "description": "The user's job title.",
          "enum": [
            "machinist",
            "storekeeper",
            "deliveryDriver",
            "chauffeur",
            "securityAgent",
            "other"
          ]
        },
        "monthlyBaseSalary": {
          "type": "number",
          "description": "The user's monthly base salary used to calculate hourly rates."
        },
        "currency": {
          "type": "string",
          "description": "The currency symbol for monetary values (e.g., FCFA)."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "The timestamp when the user profile was created."
        },
        "workLatitude": {
          "type": "number",
          "description": "The latitude of the user's primary work location."
        },
        "workLongitude": {
          "type": "number",
          "description": "The longitude of the user's primary work location."
        },
        "homeLatitude": {
            "type": "number",
            "description": "The latitude of the user's home location."
        },
        "homeLongitude": {
            "type": "number",
            "description": "The longitude of the user's home location."
        },
        "hireDate": {
          "type": "string",
          "format": "date",
          "description": "The user's hiring date."
        },
        "leaveStartDate": {
          "type": "string",
          "format": "date",
          "description": "The start date of the user's current annual leave cycle."
        },
        "fcmToken": {
            "type": "string",
            "description": "The Firebase Cloud Messaging token for push notifications."
        },
        "category": {
            "type": "string",
            "description": "The user's salary category (e.g., 'I', 'II')."
        },
        "echelon": {
            "type": "string",
            "description": "The user's salary echelon (e.g., 'A', 'B')."
        }
      },
      "required": [
        "id",
        "email",
        "name",
        "role",
        "monthlyBaseSalary",
        "currency",
        "createdAt",
        "profession"
      ]
    },
    "TimeEntry": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "TimeEntry",
      "type": "object",
      "description": "Represents a single time entry record.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the time entry."
        },
        "userProfileId": {
          "type": "string",
          "description": "Reference to UserProfile. (Relationship: UserProfile 1:N TimeEntry)"
        },
        "startTime": {
          "type": "string",
          "description": "The start time of the time entry.",
          "format": "date-time"
        },
        "endTime": {
          "type": "string",
          "description": "The end time of the time entry.",
          "format": "date-time"
        },
        "location": {
          "type": "string",
          "description": "Geolocation data associated with the time entry."
        },
        "notes": {
          "type": "string",
          "description": "Optional notes associated with the time entry."
        },
        "profession": {
          "type": "string",
          "description": "The user's profession at the time of entry.",
          "enum": [
            "machinist",
            "storekeeper",
            "deliveryDriver",
            "chauffeur",
            "securityAgent",
            "other"
          ]
        }
      },
      "required": [
        "id",
        "userProfileId",
        "startTime",
        "endTime",
        "profession"
      ]
    },
    "Team": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Team",
      "type": "object",
      "description": "Represents a team of users for data sharing and summarization.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the team."
        },
        "name": {
          "type": "string",
          "description": "The name of the team."
        },
        "memberIds": {
          "type": "array",
          "description": "References to UserProfiles. (Relationship: Team N:N UserProfile)",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "name"
      ]
    },
    "GlobalSettings": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "GlobalSettings",
      "type": "object",
      "description": "Stores global configuration settings for the application.",
      "properties": {
        "autoClockInEnabled": {
          "type": "boolean",
          "description": "A global switch to enable or disable automatic clock-in."
        },
        "breakDuration": {
          "type": "number",
          "description": "The allowed break duration in minutes."
        },
        "overtimeRates": {
          "type": "object",
          "description": "The multipliers for different overtime tiers.",
          "properties": {
            "tier1": { "type": "number" },
            "tier2": { "type": "number" },
            "night": { "type": "number" },
            "sunday": { "type": "number" },
            "holiday": { "type": "number" }
          }
        },
        "absencePenaltyAmount": {
          "type": "number",
          "description": "The flat penalty amount in FCFA for each day of unjustified absence."
        },
        "defaultHourlyRate": {
          "type": "number",
          "description": "A default hourly rate for certain calculations."
        },
        "geofenceRadius": {
            "type": "number",
            "description": "The radius in meters for geofencing work and home locations."
        }
      },
      "required": [
        "autoClockInEnabled"
      ]
    },
    "AttendanceOverride": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "AttendanceOverride",
      "type": "object",
      "description": "Stores an override for a user's daily attendance status.",
      "properties": {
        "status": {
          "type": "string",
          "description": "The overridden status for the day.",
          "enum": [
            "unjustified_absence",
            "sick_leave"
          ]
        }
      },
      "required": [
        "status"
      ]
    },
    "Announcement": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Announcement",
      "type": "object",
      "description": "Represents a broadcast message from an admin to all users.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the announcement."
        },
        "message": {
          "type": "string",
          "description": "The content of the announcement."
        },
        "authorName": {
          "type": "string",
          "description": "The name of the admin who sent the announcement."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "The timestamp when the announcement was created."
        }
      },
      "required": [
        "id",
        "message",
        "authorName",
        "createdAt"
      ]
    },
    "LeaveAnnouncement": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "LeaveAnnouncement",
      "type": "object",
      "description": "Represents an automated announcement when a user starts their annual leave.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the leave announcement."
        },
        "userId": {
          "type": "string",
          "description": "The UID of the user who is on leave."
        },
        "userName": {
          "type": "string",
          "description": "The name of the user on leave."
        },
        "leaveStartDate": {
          "type": "string",
          "format": "date",
          "description": "The start date of the leave."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "The timestamp when the announcement was created."
        }
      },
      "required": [
        "id",
        "userId",
        "userName",
        "leaveStartDate",
        "createdAt"
      ]
    },
    "AbsenceJustification": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "AbsenceJustification",
      "type": "object",
      "description": "Represents a user's request to justify an absence with supporting documentation.",
      "properties": {
        "id": {
          "type": "string"
        },
        "userId": {
          "type": "string"
        },
        "userName": {
          "type": "string"
        },
        "absenceDate": {
          "type": "string",
          "format": "date"
        },
        "imageUrl": {
          "type": "string",
          "format": "uri"
        },
        "status": {
          "type": "string",
          "enum": [
            "pending",
            "approved",
            "rejected"
          ]
        },
        "submittedAt": {
          "type": "string",
          "format": "date-time"
        }
      },
      "required": [
        "userId",
        "userName",
        "absenceDate",
        "imageUrl",
        "status",
        "submittedAt"
      ]
    },
    "WorkplaceUpdateLog": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "title": "WorkplaceUpdateLog",
        "type": "object",
        "description": "Logs geofence transitions for auditing.",
        "properties": {
            "userId": {"type": "string"},
            "eventType": {
                "type": "string",
                "enum": ["enter_work", "exit_work", "enter_home", "exit_home"]
            },
            "timestamp": {"type": "string", "format": "date-time"},
            "latitude": {"type": "number"},
            "longitude": {"type": "number"}
        },
        "required": ["userId", "eventType", "timestamp", "latitude", "longitude"]
    },
    "FaqItem": {
      "title": "FAQ Item",
      "description": "Represents a single question and answer pair for the FAQ page.",
      "type": "object",
      "properties": {
        "question": {
          "type": "string",
          "description": "The question text."
        },
        "answer": {
          "type": "string",
          "description": "The answer text."
        },
        "order": {
          "type": "number",
          "description": "The display order of the FAQ item."
        },
        "locale": {
          "type": "string",
          "description": "The language of the content.",
          "enum": ["fr", "en"]
        }
      },
      "required": ["question", "answer", "order", "locale"]
    },
    "LeaveRequest": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "LeaveRequest",
      "type": "object",
      "description": "Represents a user's generated annual leave request note.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the leave request."
        },
        "userId": {
          "type": "string",
          "description": "The UID of the user making the request."
        },
        "leaveStartDate": {
          "type": "string",
          "format": "date",
          "description": "The requested start date of the leave."
        },
        "resumeDate": {
          "type": "string",
          "format": "date",
          "description": "The calculated date of resumption of service."
        },
        "totalDays": {
          "type": "number",
          "description": "Total number of leave days requested."
        },
        "baseDays": {
          "type": "number",
          "description": "Base leave days for the period."
        },
        "senioritySurplus": {
          "type": "number",
          "description": "Bonus leave days from seniority."
        },
        "generatedAt": {
          "type": "string",
          "format": "date-time",
          "description": "The timestamp when the leave note was generated."
        }
      },
      "required": [
        "id",
        "userId",
        "leaveStartDate",
        "resumeDate",
        "totalDays",
        "generatedAt"
      ]
    },
    "SalaryGrid": {
      "title": "Salary Grid",
      "description": "Represents the official salary grid.",
      "type": "object",
      "properties": {
        "entries": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "category": { "type": "string" },
              "echelon": { "type": "string" },
              "sm": { "type": "number" }
            },
            "required": ["category", "echelon", "sm"]
          }
        }
      },
      "required": ["entries"]
    }
  },
  "auth": {
    "providers": [
      "email-password"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "UserProfile",
          "schema": {
            "$ref": "#/backend/entities/UserProfile"
          },
          "description": "Stores user profile information. The document ID is the user's UID.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user, corresponding to their Firebase Auth UID."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/timeEntries/{timeEntryId}",
        "definition": {
          "entityName": "TimeEntry",
          "schema": {
            "$ref": "#/backend/entities/TimeEntry"
          },
          "description": "Stores time entry records for each user.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user, corresponding to their Firebase Auth UID."
            },
            {
              "name": "timeEntryId",
              "description": "The unique identifier for the time entry."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/attendanceOverrides/{overrideId}",
        "definition": {
          "entityName": "AttendanceOverride",
          "schema": {
            "$ref": "#/backend/entities/AttendanceOverride"
          },
          "description": "Stores manual attendance status overrides set by an admin. The document ID should be the date in 'YYYY-MM-DD' format.",
          "params": [
            {
              "name": "userId",
              "description": "The user's UID."
            },
            {
              "name": "overrideId",
              "description": "The date of the override in 'YYYY-MM-DD' format."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/workplaceUpdateLogs/{logId}",
        "definition": {
            "entityName": "WorkplaceUpdateLog",
            "schema": { "$ref": "#/backend/entities/WorkplaceUpdateLog" },
            "description": "Stores geofence transition events for the user.",
            "params": [
                { "name": "userId", "description": "The user's UID." },
                { "name": "logId", "description": "The unique ID for the log entry." }
            ]
        }
      },
      {
        "path": "/users/{userId}/leaveRequests/{leaveRequestId}",
        "definition": {
          "entityName": "LeaveRequest",
          "schema": {
            "$ref": "#/backend/entities/LeaveRequest"
          },
          "description": "Stores generated leave request documents for each user.",
          "params": [
            {
              "name": "userId",
              "description": "The user's UID."
            },
            {
              "name": "leaveRequestId",
              "description": "The unique ID for the leave request document."
            }
          ]
        }
      },
      {
        "path": "/teams/{teamId}",
        "definition": {
          "entityName": "Team",
          "schema": {
            "$ref": "#/backend/entities/Team"
          },
          "description": "Stores team information. The 'memberIds' array contains a list of user IDs.",
          "params": [
            {
              "name": "teamId",
              "description": "The unique identifier for the team."
            }
          ]
        }
      },
      {
        "path": "/settings/{settingId}",
        "definition": {
          "entityName": "GlobalSettings",
          "schema": {
            "$ref": "#/backend/entities/GlobalSettings"
          },
          "description": "Stores global application settings. There should only be one document with the ID 'global'.",
          "params": [
            {
              "name": "settingId",
              "description": "The unique identifier for the settings document, should be 'global'."
            }
          ]
        }
      },
      {
        "path": "/salaryGrids/{gridId}",
        "definition": {
          "entityName": "SalaryGrid",
          "schema": { "$ref": "#/backend/entities/SalaryGrid" },
          "description": "Stores official salary grids. The document ID 'current' holds the active grid.",
          "params": [
            {
              "name": "gridId",
              "description": "The unique ID for the salary grid document, e.g., 'current'."
            }
          ]
        }
      },
      {
        "path": "/announcements/{announcementId}",
        "definition": {
          "entityName": "Announcement",
          "schema": {
            "$ref": "#/backend/entities/Announcement"
          },
          "description": "Stores global announcements broadcast by admins.",
          "params": [
            {
              "name": "announcementId",
              "description": "The unique identifier for the announcement."
            }
          ]
        }
      },
      {
        "path": "/leaveAnnouncements/{announcementId}",
        "definition": {
          "entityName": "LeaveAnnouncement",
          "schema": {
            "$ref": "#/backend/entities/LeaveAnnouncement"
          },
          "description": "Stores automated announcements for when users go on leave.",
          "params": [
            {
              "name": "announcementId",
              "description": "The unique identifier for the leave announcement."
            }
          ]
        }
      },
      {
        "path": "/absenceJustifications/{justificationId}",
        "definition": {
          "entityName": "AbsenceJustification",
          "schema": {
            "$ref": "#/backend/entities/AbsenceJustification"
          },
          "description": "Stores user submissions for justifying absences.",
          "params": [
            {
              "name": "justificationId",
              "description": "The unique identifier for the justification."
            }
          ]
        }
      },
      {
        "path": "/faq/{faqId}",
        "definition": {
          "entityName": "FaqItem",
          "schema": {
            "$ref": "#/backend/entities/FaqItem"
          },
          "description": "Stores individual FAQ items.",
          "params": [
            {
              "name": "faqId",
              "description": "The unique identifier for the FAQ item."
            }
          ]
        }
      }
    ]
  }
}
