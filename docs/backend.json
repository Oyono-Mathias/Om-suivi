
{
  "entities": {
    "UserProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserProfile",
      "type": "object",
      "description": "Represents a user's profile with personal and financial information.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user profile, matches Firebase Auth UID."
        },
        "email": {
          "type": "string",
          "description": "The user's email address.",
          "format": "email"
        },
        "name": {
          "type": "string",
          "description": "The user's full name."
        },
        "role": {
          "type": "string",
          "description": "The user's role in the application.",
          "enum": [
            "user",
            "admin"
          ]
        },
        "profession": {
          "type": "string",
          "description": "The user's job title.",
          "enum": [
            "machinist",
            "storekeeper",
            "deliveryDriver",
            "chauffeur",
            "securityAgent",
            "other"
          ]
        },
        "monthlyBaseSalary": {
          "type": "number",
          "description": "The user's monthly base salary used to calculate hourly rates."
        },
        "currency": {
          "type": "string",
          "description": "The currency symbol for monetary values (e.g., FCFA)."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "The timestamp when the user profile was created."
        },
        "workLatitude": {
          "type": "number",
          "description": "The latitude of the user's primary work location."
        },
        "workLongitude": {
          "type": "number",
          "description": "The longitude of the user's primary work location."
        },
        "workRadius": {
          "type": "number",
          "description": "The radius in meters for the geofence around the user's work location."
        },
        "hireDate": {
          "type": "string",
          "format": "date",
          "description": "The user's hiring date."
        },
        "leaveStartDate": {
          "type": "string",
          "format": "date",
          "description": "The start date of the user's current annual leave cycle."
        }
      },
      "required": [
        "id",
        "email",
        "name",
        "role",
        "monthlyBaseSalary",
        "currency",
        "createdAt",
        "profession"
      ]
    },
    "TimeEntry": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "TimeEntry",
      "type": "object",
      "description": "Represents a single time entry record.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the time entry."
        },
        "userProfileId": {
          "type": "string",
          "description": "Reference to UserProfile. (Relationship: UserProfile 1:N TimeEntry)"
        },
        "startTime": {
          "type": "string",
          "description": "The start time of the time entry.",
          "format": "date-time"
        },
        "endTime": {
          "type": "string",
          "description": "The end time of the time entry.",
          "format": "date-time"
        },
        "location": {
          "type": "string",
          "description": "Geolocation data associated with the time entry."
        },
        "notes": {
          "type": "string",
          "description": "Optional notes associated with the time entry."
        },
        "profession": {
          "type": "string",
          "description": "The user's profession at the time of entry.",
          "enum": [
            "machinist",
            "storekeeper",
            "deliveryDriver",
            "chauffeur",
            "securityAgent",
            "other"
          ]
        }
      },
      "required": [
        "id",
        "userProfileId",
        "startTime",
        "endTime",
        "profession"
      ]
    },
    "Team": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Team",
      "type": "object",
      "description": "Represents a team of users for data sharing and summarization.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the team."
        },
        "name": {
          "type": "string",
          "description": "The name of the team."
        },
        "memberIds": {
          "type": "array",
          "description": "References to UserProfiles. (Relationship: Team N:N UserProfile)",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "name"
      ]
    },
    "GlobalSettings": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "GlobalSettings",
      "type": "object",
      "description": "Stores global configuration settings for the application.",
      "properties": {
        "autoClockInEnabled": {
          "type": "boolean",
          "description": "A global switch to enable or disable automatic clock-in."
        },
        "breakDuration": {
          "type": "number",
          "description": "The allowed break duration in minutes."
        }
      },
      "required": [
        "autoClockInEnabled"
      ]
    },
    "AttendanceOverride": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "AttendanceOverride",
      "type": "object",
      "description": "Stores an override for a user's daily attendance status.",
      "properties": {
        "status": {
          "type": "string",
          "description": "The overridden status for the day.",
          "enum": [
            "unjustified_absence",
            "sick_leave"
          ]
        }
      },
      "required": [
        "status"
      ]
    }
  },
  "auth": {
    "providers": [
      "email-password"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "UserProfile",
          "schema": {
            "$ref": "#/backend/entities/UserProfile"
          },
          "description": "Stores user profile information. The document ID is the user's UID.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user, corresponding to their Firebase Auth UID."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/timeEntries/{timeEntryId}",
        "definition": {
          "entityName": "TimeEntry",
          "schema": {
            "$ref": "#/backend/entities/TimeEntry"
          },
          "description": "Stores time entry records for each user.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user, corresponding to their Firebase Auth UID."
            },
            {
              "name": "timeEntryId",
              "description": "The unique identifier for the time entry."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/attendanceOverrides/{overrideId}",
        "definition": {
          "entityName": "AttendanceOverride",
          "schema": {
            "$ref": "#/backend/entities/AttendanceOverride"
          },
          "description": "Stores manual attendance status overrides set by an admin. The document ID should be the date in 'YYYY-MM-DD' format.",
          "params": [
            {
              "name": "userId",
              "description": "The user's UID."
            },
            {
              "name": "overrideId",
              "description": "The date of the override in 'YYYY-MM-DD' format."
            }
          ]
        }
      },
      {
        "path": "/teams/{teamId}",
        "definition": {
          "entityName": "Team",
          "schema": {
            "$ref": "#/backend/entities/Team"
          },
          "description": "Stores team information. The 'memberIds' array contains a list of user IDs.",
          "params": [
            {
              "name": "teamId",
              "description": "The unique identifier for the team."
            }
          ]
        }
      },
      {
        "path": "/settings/{settingId}",
        "definition": {
          "entityName": "GlobalSettings",
          "schema": {
            "$ref": "#/backend/entities/GlobalSettings"
          },
          "description": "Stores global application settings. There should only be one document with the ID 'global'.",
          "params": [
            {
              "name": "settingId",
              "description": "The unique identifier for the settings document, should be 'global'."
            }
          ]
        }
      }
    ]
  }
}
